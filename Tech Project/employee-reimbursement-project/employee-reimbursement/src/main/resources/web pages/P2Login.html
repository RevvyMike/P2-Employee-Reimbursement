<!DOCTYPE html>
<html lang="en">
<head>
    <title>AAA Login Page</title>
</head>
<body>
    <h1>Login</h1>
    <input id = "username" type="text" placeholder="username"> <br>
    <input id = "password" type="password" placeholder="password"> <br><br>
    <button onclick="login()"> Sign In</button>
</body>
<script>
        async function login(){

        let loginInfo = {
            username: document.getElementById("username").value,
            userPassword: document.getElementById("password").value   
            }

        let loginJson = JSON.stringify(loginInfo);

        let config = {
            method: "PATCH",
            headers: {'Content-Type' : "application/json"},
            body: loginJson
        }

        let httpResponse = await fetch("http://localhost:8080/login", config);

        if(httpResponse.status === 200){
            let responseBody = await httpResponse.json();

            if(responseBody.role === "employee"){
                localStorage.setItem("username", username.value);
                window.location.href = "employee.html"
            } else {
                window.location.href = "P2Manager.html";
            }
        } else {
            let responseBody = await httpResponse.json();
            alert(responseBody.detail);
        }

    }

// signInButton.addEventListener('click', login)

</script>
</html>

</script>
</html>